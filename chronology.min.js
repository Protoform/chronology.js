// chronology.js v0.1 - Copyright (c) 2013 Wout Fierens - Licensed under the MIT license
(function(){this.Chronology=function(e){this.settings={limit:20,call:true};this.set(e);this.clear()};Chronology.prototype.set=function(e){for(var t in e)this.settings[t]=e[t];return this};Chronology.prototype.begin=function(e){this.clear();this.current=e;return this};Chronology.prototype.add=function(e){this.redos=[];if(this.current)this.undos.unshift(this.current);this.current=e;if(this.settings.call)this.current();if(this.settings.limit)this.undos.splice(this.settings.limit);if(typeof this.settings.onadd=="function")this.settings.onadd(this);return this};Chronology.prototype.clear=function(){this.redos=[];this.undos=[];delete this.current;return this};Chronology.prototype.revert=function(){var e=this.undos[this.undos.length-1]||this.current;this.clear();if(typeof e=="function"){this.current=e;this.current()}return this};Chronology.prototype.undo=function(){if(this.undos.length>0){this.redos.unshift(this.current);this.current=this.undos.shift();this.current();if(typeof this.settings.onundo=="function")this.settings.onundo(this)}return this};Chronology.prototype.redo=function(){if(this.redos.length>0){this.undos.unshift(this.current);this.current=this.redos.shift();this.current();if(typeof this.settings.onredo=="function")this.settings.onredo(this)}return this}})(this)